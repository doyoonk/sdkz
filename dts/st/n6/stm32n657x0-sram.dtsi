/*
 * Copyright (c) 2025 HU Inc.
 *
 * SPDX-License-Identifier: Apache-2.0
 */

#include <arm/armv8.1-m.dtsi>
#include <zephyr/dt-bindings/clock/stm32n6_clock.h>
#include <zephyr/dt-bindings/reset/stm32n6_reset.h>
#include <zephyr/dt-bindings/memory-attr/memory-attr.h>
#include <zephyr/dt-bindings/memory-attr/memory-attr-arm.h>
#include <freq.h>

/ {
	soc {
		ramcfg_sram1_ahb: ramcfg@42023300 {
			compatible = "st,stm32n6-ramcfg";
			#address-cells = <1>;
			#size-cells = <1>;
			reg = <0x42023300 0x80>;
			clocks = <&rcc STM32_CLOCK(MEM, 4)>, <&rcc STM32_CLOCK(AHB2, 12)>;
			clock-names = "axisram", "ramcfg";

			ahbsram1: memory@38000000 {
				compatible = "zephyr,memory-region", "mmio-sram";
				zephyr,memory-region = "AHBSRAM1";
				zephyr,memory-attr = <DT_MEM_ARM(ATTR_MPU_RAM)>;
				reg = <0x38000000 DT_SIZE_K(16)>;
				status = "disabled";
			};
		};
		ramcfg_sram2_ahb: ramcfg@42023380 {
			compatible = "st,stm32n6-ramcfg";
			#address-cells = <1>;
			#size-cells = <1>;
			reg = <0x42023380 0x80>;
			clocks = <&rcc STM32_CLOCK(MEM, 5)>, <&rcc STM32_CLOCK(AHB2, 12)>;
			clock-names = "axisram", "ramcfg";

			ahbsram2: memory@38004000 {
				compatible = "zephyr,memory-region", "mmio-sram";
				zephyr,memory-region = "AHBSRAM2";
				zephyr,memory-attr = <DT_MEM_ARM(ATTR_MPU_RAM)>;
				reg = <0x38004000 DT_SIZE_K(16)>;
				status = "disabled";
			};
		};
		ramcfg_venc_ram: ramcfg@42023400 {
			compatible = "st,stm32n6-ramcfg";
			#address-cells = <1>;
			#size-cells = <1>;
			reg = <0x42023400 0x80>;
			clocks = <&rcc STM32_CLOCK(MEM, 11)>, <&rcc STM32_CLOCK(APB5, 5)>;
			clock-names = "axisram", "ramcfg";

			venc_ram: memory@34400000 {
				compatible = "zephyr,memory-region", "mmio-sram";
				zephyr,memory-region = "VENCRAM";
				zephyr,memory-attr = <DT_MEM_ARM(ATTR_MPU_RAM)>;
				reg = <0x34400000 DT_SIZE_K(128)>;
				status = "disabled";
			};
		};
		ramcfg_bkpsram: ramcfg@42023480 {
			compatible = "st,stm32n6-ramcfg";
			#address-cells = <1>;
			#size-cells = <1>;
			reg = <0x42023480 0x80>;
			clocks = <&rcc STM32_CLOCK(MEM, 6)>, <&rcc STM32_CLOCK(AHB2, 12)>;
			clock-names = "axisram", "ramcfg";

			backup_sram: memory@3c000000 {
				compatible = "zephyr,memory-region", "mmio-sram";
				zephyr,memory-region = "BKPSRAM";
				zephyr,memory-attr = <DT_MEM_ARM(ATTR_MPU_RAM)>;
				reg = <0x3c000000 DT_SIZE_K(8)>;
				status = "disabled";
			};
		};
	};
	
	itcm: memory@10000000 {
		compatible = "zephyr,memory-region", "arm,itcm";
		reg = <0x10000000 DT_SIZE_K(64)>;
		zephyr,memory-region = "ITCM";
		status = "disabled";
	};

	dtcm: memory@30000000 {
		compatible = "zephyr,memory-region", "arm,dtcm";
		reg = <0x30000000 DT_SIZE_K(128)>;
		zephyr,memory-region = "DTCM";
		status = "disabled";
	};

	axisrama: memory@24000000 {
		reg = <0x24000000 (DT_SIZE_M(2)
			+ DT_SIZE_K(448)
			+ DT_SIZE_K(448)
			+ DT_SIZE_K(448)
			+ DT_SIZE_K(448)
		)>;
	};
	axisramb: memory@24180400 {
		reg = <0x24180400 DT_SIZE_K(511)>;
	};

	ahbsram: memory@38000000 {
		reg = <0x38000000 (DT_SIZE_K(16) + DT_SIZE_K(16))>;
	};
};
